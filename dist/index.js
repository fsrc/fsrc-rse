// Generated by LiveScript 1.6.0
(function(){
  var ref$, head, tail, filter, reject, any, listCli, openCli, newCli, help, say, args, exec, commands, helpText, flags, options, host, command, session, client;
  ref$ = require('prelude-ls'), head = ref$.head, tail = ref$.tail, filter = ref$.filter, reject = ref$.reject, any = ref$.any;
  ref$ = require('./cli'), listCli = ref$.listCli, openCli = ref$.openCli, newCli = ref$.newCli;
  help = require('./help');
  say = console.log;
  args = tail(
  process.argv);
  exec = head(
  args);
  args = tail(
  args);
  commands = ['help', 'list', 'open', 'new'];
  helpText = help(exec, commands);
  flags = filter(function(arg){
    return arg[0] === '-';
  })(
  args);
  args = reject(function(arg){
    return arg[0] === '-';
  })(
  args);
  options = {
    dmenu: any(function(alt){
      return alt === '-d';
    })(
    flags)
  };
  host = head(
  args);
  if (any(function(cmd){
    return cmd === host;
  })(
  commands)) {
    command = host;
    host = null;
    session = args[1];
  } else {
    command = args[1];
    session = args[2];
  }
  client = 'mosh';
  if (host == null) {
    host = process.env.RSE_HOST;
  }
  switch (command) {
  case 'help':
    say(helpText);
    break;
  case 'list':
    listCli(options, host);
    break;
  case 'open':
    openCli(options, client, host, session);
    break;
  case 'new':
    newCli(options, client, host, session);
    break;
  default:
    say(helpText);
  }
}).call(this);
